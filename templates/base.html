<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}ARVLab: Advanced Remote Viewing Research Platform{% endblock %}</title>
    
    <!-- SEO and AI Optimization Meta Tags -->
    <meta name="description" content="{% block description %}Advanced remote viewing platform for experienced practitioners and ARV researchers. Access professional protocols, cutting-edge AI analysis, and elite consciousness research community.{% endblock %}">
    <meta name="keywords" content="{% block keywords %}advanced remote viewing, experienced ARV practitioners, professional consciousness research, expert remote viewing protocols, seasoned RV professionals, advanced ARV methodology, elite remote viewing platform{% endblock %}">
    <meta name="author" content="ARVLab Research Platform">
    <meta name="robots" content="{% block robots %}index, follow{% endblock %}">
    <meta name="language" content="en">
    <meta name="rating" content="General">
    
    <!-- Geographic and International SEO -->
    <meta name="geo.region" content="US">
    <meta name="geo.placename" content="United States">
    <meta name="geo.position" content="39.50;-98.35">
    <meta name="ICBM" content="39.50, -98.35">
    <meta name="distribution" content="global">
    <meta name="coverage" content="worldwide">
    
    <!-- Additional SEO Meta Tags -->
    <meta name="theme-color" content="#28a745">
    <meta name="msapplication-TileColor" content="#28a745">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="mobile-web-app-capable" content="yes">
    
    <!-- Internationalization -->
    <link rel="alternate" hreflang="en" href="https://arvlab.xyz">
    <link rel="alternate" hreflang="x-default" href="https://arvlab.xyz">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="{% block og_type %}website{% endblock %}">
    <meta property="og:url" content="{% block og_url %}https://arvlab.xyz{% if request %}{{ request.url.path }}{% endif %}{% endblock %}">
    <meta property="og:title" content="{% block og_title %}{{ self.title() }}{% endblock %}">
    <meta property="og:description" content="{% block og_description %}Elite platform for experienced remote viewers and ARV practitioners. Access advanced protocols, professional research tools, and cutting-edge AI analysis for seasoned consciousness researchers.{% endblock %}">
    <meta property="og:image" content="{% block og_image %}https://arvlab.xyz/static/images/arvlab-social-preview.png{% endblock %}">
    <meta property="og:image:secure_url" content="https://arvlab.xyz/static/images/arvlab-social-preview.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="ARVLab - Remote Viewing Research Platform">
    <meta property="og:site_name" content="ARVLab">
    <meta property="og:locale" content="en_US">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@ARVLab">
    <meta name="twitter:creator" content="@ARVLab">
    <meta name="twitter:title" content="{% block twitter_title %}{{ self.title() }}{% endblock %}">
    <meta name="twitter:description" content="{% block twitter_description %}Advanced platform for experienced remote viewers and ARV practitioners. Access professional protocols and elite consciousness research tools.{% endblock %}">
    <meta name="twitter:image" content="{% block twitter_image %}https://arvlab.xyz/static/images/arvlab-social-preview.png{% endblock %}">
    <meta name="twitter:image:alt" content="ARVLab Remote Viewing Research Platform">
    
    <!-- Canonical URL -->
    {% block canonical %}<link rel="canonical" href="https://arvlab.xyz{% if request %}{{ request.url.path }}{% endif %}">{% endblock %}
    
    <!-- JSON-LD Structured Data: WebSite Schema -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "ARVLab",
        "alternateName": ["ARV Lab", "Remote Viewing Lab"],
        "description": "Advanced platform for experienced remote viewing practitioners and consciousness researchers conducting ARV experiments",
        "url": "https://arvlab.xyz",
        "potentialAction": {
            "@type": "SearchAction",
            "target": "https://arvlab.xyz/search?q={search_term_string}",
            "query-input": "required name=search_term_string"
        },
        "inLanguage": "en",
        "isAccessibleForFree": true,
        "keywords": "remote viewing platform, ARV research, consciousness studies, prediction experiments"
    }
    </script>
    
    <!-- JSON-LD Structured Data: Organization Schema -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Organization",
        "@id": "https://arvlab.xyz/#organization",
        "name": "ARVLab",
        "alternateName": "Associative Remote Viewing Laboratory",
        "description": "Professional platform for experienced remote viewing practitioners and advanced consciousness research",
        "url": "https://arvlab.xyz",
        "foundingDate": "2024",
        "areaServed": "Worldwide",
        "sameAs": [
            "https://twitter.com/ARVLab",
            "https://github.com/arvlab"
        ],
        "serviceOffered": {
            "@type": "Service",
            "@id": "https://arvlab.xyz/#service",
            "name": "Remote Viewing Training and Research Platform",
            "description": "Professional platform for experienced remote viewing practitioners and advanced consciousness research",
            "serviceType": "Research Platform",
            "areaServed": "Global",
            "availableLanguage": "en",
            "isAccessibleForFree": true
        }
    }
    </script>
    
    <!-- JSON-LD Structured Data: Research Project Schema -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "ResearchProject",
        "@id": "https://arvlab.xyz/#research",
        "name": "Associative Remote Viewing Research",
        "description": "Advanced consciousness research platform for experienced remote viewing practitioners and professional ARV methodology",
        "keywords": ["remote viewing", "ARV", "consciousness research", "precognition", "parapsychology", "prediction research", "ESP"],
        "funder": {
            "@type": "Organization",
            "@id": "https://arvlab.xyz/#organization"
        },
        "about": {
            "@type": "Thing",
            "name": "Remote Viewing",
            "description": "Mental faculty for accessing information across distance, time, or barriers"
        }
    }
    </script>
    
    <!-- Breadcrumb Schema -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BreadcrumbList",
        "itemListElement": [
            {
                "@type": "ListItem",
                "position": 1,
                "name": "Home",
                "item": "https://arvlab.xyz"
            }{% block breadcrumb_items %}{% endblock %}
        ]
    }
    </script>{% block additional_schema %}{% endblock %}
    
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" media="all">
    <link href="/static/style.css" rel="stylesheet" media="all">
    
    <!-- Preload critical resources -->
    <link rel="dns-prefetch" href="//cdn.jsdelivr.net">
    <link rel="dns-prefetch" href="//cdnjs.cloudflare.com">
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" href="/">
                ARVLab
            </a>
            
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="/">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/trials">Tasks</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/leaderboard">
                            <i data-lucide="trophy" style="width: 16px; height: 16px;" class="me-1"></i>
                            Top Performers
                        </a>
                    </li>
                    {% if user %}
                    <li class="nav-item">
                        <a class="nav-link" href="/dashboard">Dashboard</a>
                    </li>
                    {% endif %}
                    {% if user and user.is_admin %}
                    <li class="nav-item">
                        <a class="nav-link" href="/targets">Targets</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/admin">Admin</a>
                    </li>
                    {% endif %}
                </ul>
                
                <ul class="navbar-nav">
                    {% if user %}
                    <li class="nav-item me-3">
                        <span class="navbar-text me-2">
                            <i data-lucide="credit-card" style="width: 16px; height: 16px;"></i>
                            <span class="fw-bold">{{ user.tasking_credits }}</span> credits
                        </span>
                    </li>
                    <li class="nav-item me-3">
                        <div class="btn-group">
                            <a class="btn btn-primary btn-sm" href="/trials/create">
                                <i data-lucide="plus"></i> Create Task
                            </a>
                            <a class="btn btn-success btn-sm" href="/join-group">
                                <i data-lucide="users"></i> Join Group
                            </a>
                        </div>
                    </li>
                    {% endif %}
                    {% if user %}
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                            {{ user.name }} <span class="badge bg-secondary">{{ 'Admin' if user.is_admin else 'User' }}</span>
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="/account/credits">
                                <i data-lucide="credit-card" style="width: 16px; height: 16px;"></i> My Credits
                            </a></li>
                            <li><a class="dropdown-item" href="/referrals">
                                <i data-lucide="users" style="width: 16px; height: 16px;"></i> Referrals
                            </a></li>
                            <li><a class="dropdown-item" href="/purchase-credits">
                                <i data-lucide="shopping-cart" style="width: 16px; height: 16px;"></i> Buy Credits
                            </a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="/logout">Logout</a></li>
                        </ul>
                    </li>
                    {% else %}
                    <li class="nav-item">
                        <a class="nav-link" href="/login">Login</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/register">Register</a>
                    </li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </nav>

    <!-- Breadcrumb Navigation -->
    <div class="container" style="padding-top: 1rem;">
        <nav aria-label="breadcrumb" class="mt-3">
            <ol class="breadcrumb bg-light px-3 py-2 rounded">
                <li class="breadcrumb-item">
                    <a href="/" class="text-decoration-none">
                        <i data-lucide="home" style="width: 16px; height: 16px;" class="me-1"></i>
                        Home
                    </a>
                </li>
                {% block breadcrumb %}{% endblock %}
            </ol>
        </nav>
    </div>

    <main class="container mt-4">
        {% block content %}{% endblock %}
    </main>

    <!-- Floating Action Button for Mobile (All Users) -->
    {% if user %}
    <a href="/trials/create" class="fab-create-trial d-lg-none" title="Create ARV Trial">
        <i data-lucide="plus"></i>
    </a>
    {% endif %}

    <footer class="bg-light mt-5 py-4">
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <h6>Foresight ARV Platform</h6>
                    <p class="text-muted small">
                        Experimental Associative Remote Viewing prediction platform.
                        <strong>For research and entertainment purposes only.</strong>
                        Not financial advice.
                    </p>
                </div>
                <div class="col-md-6 text-end">
                    <p class="text-muted small">
                        Built with FastAPI, WebSockets, and optional AI embeddings
                    </p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Include Feedback Modal -->
    {% include 'components/feedback_modal.html' %}

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" defer></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js" defer></script>
    <script src="/static/app.js" defer></script>
    <script>
        // Initialize icons when DOM and scripts are ready
        document.addEventListener('DOMContentLoaded', function() {
            if (window.initializeLucideIcons) {
                window.initializeLucideIcons();
            }
        });
        
        // CLIP preprocessing function removed - feature is currently disabled
    </script>
    {% block scripts %}{% endblock %}
</body>
</html>
